<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tide Times - Pompano Beach</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Tide Forecast</h1>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="food.html">Food</a></li>
        <li><a href="activities.html">Activities</a></li>
        <li><a href="tides.html">Tides</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section>
      <h2>Check the tides</h2>
      <label for="tideDate">Choose a date:</label>
      <input type="date" id="tideDate" />
      <button onclick="getTideTimes()">Check Tide Times</button>
      <div id="tideResults"></div>
    </section>
  </main>

  <script>
    async function getTideTimes() {
      const date = document.getElementById("tideDate").value;
      const resultsDiv = document.getElementById("tideResults");

      if (!date) {
        resultsDiv.innerHTML = "Please select a date.";
        return;
      }

      resultsDiv.innerHTML = "Loading tide data...";

      try {
        // Example: NOAA Tides API - Replace with actual values
        const stationId = "8722670"; // Pompano Beach nearby NOAA station (Fort Lauderdale)
        const response = await fetch(`https://api.tidesandcurrents.noaa.gov/api/prod/datagetter?date=${date}&station=${stationId}&product=predictions&datum=MLLW&units=english&time_zone=lst_ldt&format=json&interval=hilo`);
        const data = await response.json();

        if (!data.predictions) {
          resultsDiv.innerHTML = "No tide data found for that date.";
          return;
        }

        let html = "<h3>High and Low Tides</h3><ul>";
        data.predictions.forEach(pred => {
          html += `<li>${pred.t} â€” <strong>${pred.type}</strong> tide at ${pred.v} ft</li>`;
        });
        html += "</ul>";
        resultsDiv.innerHTML = html;
      } catch (err) {
        resultsDiv.innerHTML = "Error fetching tide data. Try again later.";
        console.error(err);
      }
    }
  </script>
</body>
</html>
